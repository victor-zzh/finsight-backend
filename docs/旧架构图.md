+--------------------------------------------------------------------------------------------------+
|                                        用户 (Personal Investor)                                        |
+--------------------------------------------------------------------------------------------------+
       |
       |  (HTTPS Request via Browser/App)
       v
+---------------------------------------- [ 在线服务应用 (Online Serving Application) ] -----------------------------------------+
|                                                                                                                              |
|    +--------------------------+        +----------------------------------------------------------------------------------+    |
|    |                          |        |                                                                                  |    |
|    |  Next.js 前端 (Client)   | <------> |  Next.js 后端 (Server API)                                                       |    |
|    | (React UI Components)    |        |  (作为总指挥官 Orchestrator)                                                       |    |
|    |                          |        |                                                                                  |    |
|    +--------------------------+        +----------------------------------+-----------------------------------------------+    |
|                                                                           |                                                |    |
|                                        +----------------------------------+----------------------------------+              |    |
|                                        | (1. 意图分析)                     | (3. 最终报告生成)                 |              |    |
|                                        v                                  v                                 |              |    |
|                              +------------------+             +----------------------+               | (2b. 实时数据)   |
|                              | GLM (快速/免费模型) |             | GLM (强大/付费模型)  |               v              |
|                              +------------------+             +----------------------+    +-------------------------+ |
|                                        ^                                  ^               | Tushare/AKshare         | |
|                                        |                                  |               | (Real-time Quote API)   | |
|                                        +----------------------------------+               +-------------------------+ |
|                                                                           |                                                |
|                                        +----------------------------------+----------------------------------+              |
|                                        | (2a. 结构化数据)                  | (2a. 非结构化文本 RAG)            |              |
|                                        v                                  v                                 |              |
|                              +------------------+             +----------------------+               |              |
|                              | PostgreSQL       |             | Qdrant Cloud         |               |              |
|                              | (结构化财务数据)   |             | (财报/新闻向量数据)    |               |              |
|                              +------------------+             +----------------------+               |              |
|                                                                                                                              |
+------------------------------------------------------------------------------------------------------------------------------+
       ^                                                                      ^
       | (Data Provisioning)                                                  | (Data Provisioning)
       |                                                                      |
+------|------------------------------------ [ 离线数据管道 (Offline Data Pipeline) ] -------------------------|---------------+
|      |                                                                      |                                             |
|      +--------------------------+        +----------------------------------+---------------------------------------------+
|                                 |        |                                                                              |
|      +------------------------+ |        |    +-----------------------------------------------------------------------+ |
|      | Tushare API            | |        |    |                                                                       | |
|      | (历史财报, 新闻, 公告) | |        |    |  Python 数据处理脚本 (Cron Job / Scheduled Task)                      | |
|      +------------------------+ |        |    |  (负责: Fetch -> Parse -> Clean -> Standardize -> Vectorize)          | |
|                                 |        |    |                                                                       | |
|      +------------------------+ |        |    +-----------------------------------------------------------------------+ |
|      | 巨潮资讯网等官方源       | +----------> |                                                                              |
|      | (财报PDF原文)          |        |                                                                              |
|      +------------------------+        +------------------------------------------------------------------------------+
|                                                                                                                              |
+------------------------------------------------------------------------------------------------------------------------------+