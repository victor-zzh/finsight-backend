+-----------------+
    |   User (Browser)|
    +-------+---------+
            | [1. User Query]
            v
+-----------+-----------------------------+
| `finsight-app` (Next.js)                |
| (Security Gateway / BFF)                |
|                                         |
| +--------------+   [2. Forward]   +---------------------+
| | React Front UI |--------------->| Next.js BFF API     |
| | (Pure Renderer)|   [8. JSON]     | (/api/analyze)      |
| +--------------+   <---------------|                     |
|       ^                          +----------+----------+
|       | [9. Display]                        | [3. Analyze Request]
+-------+-------------------------------------+ (Internal HTTP Call)
                                              |
                                              v
+---------------------------------------------+-------------------+
| `finsight-backend` (Python Service)                             |
|                                                                 |
| +-------------------------------------------------------------+ |
| | Online App (/app - FastAPI w/ CrewAI)                       | |
| | [4. Crew Starts Sequential Tasks]                           | |
| |  |                                                          | |
| |  +-> [Agent 1: Intent] ------------------------------------->| | [To LLM]
| |  |                                                          | |
| |  +-> [Agent 2: Data] ----+--> [To Supabase]                   | |
| |  |                       |--> [To Qdrant]                     | |
| |  |                       +--> [To Tushare]                    | |
| |  |                                                          | |
| |  +-> [Agent 3: Synthesis] ---------------------------------->| | [To LLM]
| |  |                                                          | |
| |  +-- [7. Final Report JSON] -> (Returns to BFF)             | |
| +-------------------------------------------------------------+ |
|                                                                 |
| +-------------------------------------------------------------+ |
| | Offline Collection (/collection - Python Script)            | |
| | (Timed Job - e.g., daily)                                   | |
| |  |                                                          | |
| |  +-> [Fetch] ----------------------------------------------->| | [To Tushare]
| |  |                                                          | |
| |  +-> [Write] ----------------------------------------------->| | [To Supabase]
| |  |                                                          | |
| |  +-> [Write] ----------------------------------------------->| | [To Qdrant]
| +-------------------------------------------------------------+ |
+-----------------------------------------------------------------+
      |         |         |          |
      |         |         |          |
      +---------+---------+----------+
      |         |         |
      v         v         v
+-----+-----+ +---------+--------+ +--------------+
| LLM API   | | Supabase (SQL)   | | Qdrant (Vector)|
| (GLM)     | | (Tushare Realtime)| |                |
+-----------+ +------------------+ +--------------+